{"openapi":"3.1.0","info":{"title":"Empathy Hub API","description":"API for Empathy Hub, a platform for empathic connection and support.","version":"0.1.0"},"paths":{"/api/v1/users/":{"post":{"tags":["users"],"summary":"Create User Anonymous","description":"Create new user.\nBackend generates anonymous_id.\nReturns an access token.","operationId":"create_user_anonymous_api_v1_users__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["users"],"summary":"Read Users Endpoint","description":"Retrieve users.\nNote: In a production app, this might be restricted to admin users.","operationId":"read_users_endpoint_api_v1_users__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserRead"},"title":"Response Read Users Endpoint Api V1 Users  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/me":{"get":{"tags":["users"],"summary":"Read User Me","description":"Get current authenticated user's details.","operationId":"read_user_me_api_v1_users_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRead"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"put":{"tags":["users"],"summary":"Update User Me","description":"Update current authenticated user's profile.","operationId":"update_user_me_api_v1_users_me_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"delete":{"tags":["users"],"summary":"Delete User Me","description":"Delete the current authenticated user's profile.\nThis action is irreversible.","operationId":"delete_user_me_api_v1_users_me_delete","responses":{"204":{"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/users/{user_id}":{"get":{"tags":["users"],"summary":"Read User By Id Endpoint","description":"Get a specific user by their internal ID.\nNote: In a production app, access control might be more granular.","operationId":"read_user_by_id_endpoint_api_v1_users__user_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/anonymous/{user_anonymous_id}":{"get":{"tags":["users"],"summary":"Read User By Anonymous Id Endpoint","description":"Get a specific user by their public anonymous ID.\nRequires authentication to use this endpoint.","operationId":"read_user_by_anonymous_id_endpoint_api_v1_users_anonymous__user_anonymous_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"user_anonymous_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Anonymous Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/{author_anonymous_id}/posts":{"get":{"tags":["users"],"summary":"Read Posts By Author","description":"Retrieve posts created by a specific author, identified by their anonymous ID.\nRequires authentication to use this endpoint.","operationId":"read_posts_by_author_api_v1_users__author_anonymous_id__posts_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"author_anonymous_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Author Anonymous Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PostRead"},"title":"Response Read Posts By Author Api V1 Users  Author Anonymous Id  Posts Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/{author_anonymous_id}/comments":{"get":{"tags":["users"],"summary":"Read Comments By Author","description":"Retrieve comments created by a specific author, identified by their anonymous ID.\nRequires authentication to use this endpoint.","operationId":"read_comments_by_author_api_v1_users__author_anonymous_id__comments_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"author_anonymous_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Author Anonymous Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CommentRead"},"title":"Response Read Comments By Author Api V1 Users  Author Anonymous Id  Comments Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/posts/":{"post":{"tags":["posts-and-comments"],"summary":"Create Post","description":"Create new post.","operationId":"create_post_api_v1_posts__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["posts-and-comments"],"summary":"Read Posts","description":"Retrieve a list of posts.\nRequires authentication, but does not filter by user unless\nthe CRUD operation itself is modified to do so.","operationId":"read_posts_api_v1_posts__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PostRead"},"title":"Response Read Posts Api V1 Posts  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/posts/{post_anonymous_id}/vote":{"post":{"tags":["posts-and-comments"],"summary":"Vote On Post","description":"Vote on a post (upvote or downvote).\nSending the same vote again will unvote.\nSending a different vote will change the vote.","operationId":"vote_on_post_api_v1_posts__post_anonymous_id__vote_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"post_anonymous_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Post Anonymous Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostVoteCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/posts/{post_anonymous_id}":{"get":{"tags":["posts-and-comments"],"summary":"Read Post By Anonymous Id","description":"Get a specific post by its anonymous ID.","operationId":"read_post_by_anonymous_id_api_v1_posts__post_anonymous_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"post_anonymous_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Post Anonymous Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["posts-and-comments"],"summary":"Update Post","description":"Update a post.","operationId":"update_post_api_v1_posts__post_anonymous_id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"post_anonymous_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Post Anonymous Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["posts-and-comments"],"summary":"Delete Post","description":"Delete a post. Only the author of the post can delete it.","operationId":"delete_post_api_v1_posts__post_anonymous_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"post_anonymous_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Post Anonymous Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/posts/{post_anonymous_id}/comments/":{"post":{"tags":["posts-and-comments"],"summary":"Create a comment for a post","description":"Create a new comment for a specific post.\nThe user making the comment will be the currently authenticated user.","operationId":"create_comment_for_post_api_v1_posts__post_anonymous_id__comments__post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"post_anonymous_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Post Anonymous Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["posts-and-comments"],"summary":"List comments for a post","description":"Retrieve comments for a specific post with pagination.","operationId":"read_comments_for_post_api_v1_posts__post_anonymous_id__comments__get","parameters":[{"name":"post_anonymous_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Post Anonymous Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CommentRead"},"title":"Response Read Comments For Post Api V1 Posts  Post Anonymous Id  Comments  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/posts/comments/{comment_id}/":{"put":{"tags":["posts-and-comments"],"summary":"Update a comment","description":"Update an existing comment. Only the author of the comment can update it.","operationId":"update_comment_api_v1_posts_comments__comment_id___put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"comment_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Comment Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["posts-and-comments"],"summary":"Delete a comment","description":"Delete a comment. Only the author of the comment can delete it.","operationId":"delete_comment_api_v1_posts_comments__comment_id___delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"comment_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Comment Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/posts/comments/{comment_anonymous_id}/vote":{"post":{"tags":["posts-and-comments"],"summary":"Vote on a comment","description":"Vote on a comment (upvote or downvote).\nSending the same vote again will unvote.\nSending a different vote will change the vote.","operationId":"vote_on_comment_api_v1_posts_comments__comment_anonymous_id__vote_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"comment_anonymous_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Comment Anonymous Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentVoteCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/token":{"post":{"tags":["authentication"],"summary":"Login For Access Token","description":"OAuth2 compatible token login, get an access token for future requests.\nExpects an existing anonymous_id to be provided in the 'username' form field.","operationId":"login_for_access_token_api_v1_auth_token_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_for_access_token_api_v1_auth_token_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Read Root","operationId":"read_root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health Check","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AuthorRead":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"username":{"type":"string","title":"Username"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"}},"type":"object","required":["id","username"],"title":"AuthorRead"},"Body_login_for_access_token_api_v1_auth_token_post":{"properties":{"identifier":{"type":"string","title":"Identifier"}},"type":"object","required":["identifier"],"title":"Body_login_for_access_token_api_v1_auth_token_post"},"ChatAvailabilityEnum":{"type":"string","enum":["open_to_chat","request_only","do_not_disturb"],"title":"ChatAvailabilityEnum"},"CommentCreate":{"properties":{"content":{"type":"string","maxLength":1000,"minLength":1,"title":"Content"}},"type":"object","required":["content"],"title":"CommentCreate"},"CommentRead":{"properties":{"content":{"type":"string","maxLength":1000,"minLength":1,"title":"Content"},"author":{"$ref":"#/components/schemas/AuthorRead"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"upvotes":{"type":"integer","title":"Upvotes"},"downvotes":{"type":"integer","title":"Downvotes"},"post_id":{"type":"string","format":"uuid","title":"Post Id"},"id":{"type":"string","format":"uuid","title":"Id","readOnly":true}},"type":"object","required":["content","author","created_at","upvotes","downvotes","post_id","id"],"title":"CommentRead"},"CommentUpdate":{"properties":{"content":{"anyOf":[{"type":"string","maxLength":1000,"minLength":1},{"type":"null"}],"title":"Content"}},"type":"object","title":"CommentUpdate"},"CommentVoteCreate":{"properties":{"vote_type":{"$ref":"#/components/schemas/VoteTypeEnum"}},"type":"object","required":["vote_type"],"title":"CommentVoteCreate"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"PostCreate":{"properties":{"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"content":{"type":"string","title":"Content"}},"type":"object","required":["content"],"title":"PostCreate"},"PostRead":{"properties":{"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"content":{"type":"string","title":"Content"},"author":{"$ref":"#/components/schemas/AuthorRead"},"comment_count":{"type":"integer","title":"Comment Count"},"is_active":{"type":"boolean","title":"Is Active"},"is_edited":{"type":"boolean","title":"Is Edited"},"upvotes":{"type":"integer","title":"Upvotes"},"downvotes":{"type":"integer","title":"Downvotes"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"id":{"type":"string","format":"uuid","title":"Id","readOnly":true}},"type":"object","required":["content","author","comment_count","is_active","is_edited","upvotes","downvotes","created_at","id"],"title":"PostRead"},"PostUpdate":{"properties":{"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"content":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"PostUpdate"},"PostVoteCreate":{"properties":{"vote_type":{"$ref":"#/components/schemas/VoteTypeEnum"}},"type":"object","required":["vote_type"],"title":"PostVoteCreate"},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type"},"username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Username"},"anonymous_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Anonymous Id"}},"type":"object","required":["access_token","token_type"],"title":"Token"},"UserCreate":{"properties":{"username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Username"},"bio":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bio"},"pronouns":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pronouns"},"chat_availability":{"anyOf":[{"$ref":"#/components/schemas/ChatAvailabilityEnum"},{"type":"null"}]},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active","default":true}},"type":"object","title":"UserCreate"},"UserRead":{"properties":{"username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Username"},"bio":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bio"},"pronouns":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pronouns"},"chat_availability":{"$ref":"#/components/schemas/ChatAvailabilityEnum"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"},"is_active":{"type":"boolean","title":"Is Active"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"id":{"type":"string","title":"Id","readOnly":true}},"type":"object","required":["chat_availability","is_active","created_at","id"],"title":"UserRead"},"UserUpdate":{"properties":{"username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Username"},"bio":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bio"},"pronouns":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pronouns"},"chat_availability":{"anyOf":[{"$ref":"#/components/schemas/ChatAvailabilityEnum"},{"type":"null"}]},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"UserUpdate"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VoteTypeEnum":{"type":"string","enum":["upvote","downvote"],"title":"VoteTypeEnum"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"api/v1/auth/token"}}}}}}